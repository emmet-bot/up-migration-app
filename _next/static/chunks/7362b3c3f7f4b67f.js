(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,998183,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={assign:function(){return c},searchParamsToUrlQuery:function(){return a},urlQueryToSearchParams:function(){return o}};for(var r in i)Object.defineProperty(n,r,{enumerable:!0,get:i[r]});function a(e){let t={};for(let[n,i]of e.entries()){let e=t[n];void 0===e?t[n]=i:Array.isArray(e)?e.push(i):t[n]=[e,i]}return t}function s(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function o(e){let t=new URLSearchParams;for(let[n,i]of Object.entries(e))if(Array.isArray(i))for(let e of i)t.append(n,s(e));else t.set(n,s(i));return t}function c(e,...t){for(let n of t){for(let t of n.keys())e.delete(t);for(let[t,i]of n.entries())e.append(t,i)}return e}},195057,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={formatUrl:function(){return o},formatWithValidation:function(){return l},urlObjectKeys:function(){return c}};for(var r in i)Object.defineProperty(n,r,{enumerable:!0,get:i[r]});let a=e.r(190809)._(e.r(998183)),s=/https?|ftp|gopher|file/;function o(e){let{auth:t,hostname:n}=e,i=e.protocol||"",r=e.pathname||"",o=e.hash||"",c=e.query||"",l=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?l=t+e.host:n&&(l=t+(~n.indexOf(":")?`[${n}]`:n),e.port&&(l+=":"+e.port)),c&&"object"==typeof c&&(c=String(a.urlQueryToSearchParams(c)));let u=e.search||c&&`?${c}`||"";return i&&!i.endsWith(":")&&(i+=":"),e.slashes||(!i||s.test(i))&&!1!==l?(l="//"+(l||""),r&&"/"!==r[0]&&(r="/"+r)):l||(l=""),o&&"#"!==o[0]&&(o="#"+o),u&&"?"!==u[0]&&(u="?"+u),r=r.replace(/[?#]/g,encodeURIComponent),u=u.replace("#","%23"),`${i}${l}${r}${u}${o}`}let c=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function l(e){return o(e)}},818581,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"useMergedRef",{enumerable:!0,get:function(){return r}});let i=e.r(271645);function r(e,t){let n=(0,i.useRef)(null),r=(0,i.useRef)(null);return(0,i.useCallback)(i=>{if(null===i){let e=n.current;e&&(n.current=null,e());let t=r.current;t&&(r.current=null,t())}else e&&(n.current=a(e,i)),t&&(r.current=a(t,i))},[e,t])}function a(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let n=e(t);return"function"==typeof n?n:()=>e(null)}}("function"==typeof n.default||"object"==typeof n.default&&null!==n.default)&&void 0===n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),t.exports=n.default)},718967,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={DecodeError:function(){return C},MiddlewareNotFoundError:function(){return b},MissingStaticPage:function(){return v},NormalizeError:function(){return y},PageNotFoundError:function(){return w},SP:function(){return g},ST:function(){return m},WEB_VITALS:function(){return a},execOnce:function(){return s},getDisplayName:function(){return d},getLocationOrigin:function(){return l},getURL:function(){return u},isAbsoluteUrl:function(){return c},isResSent:function(){return h},loadGetInitialProps:function(){return p},normalizeRepeatedSlashes:function(){return f},stringifyError:function(){return I}};for(var r in i)Object.defineProperty(n,r,{enumerable:!0,get:i[r]});let a=["CLS","FCP","FID","INP","LCP","TTFB"];function s(e){let t,n=!1;return(...i)=>(n||(n=!0,t=e(...i)),t)}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,c=e=>o.test(e);function l(){let{protocol:e,hostname:t,port:n}=window.location;return`${e}//${t}${n?":"+n:""}`}function u(){let{href:e}=window.location,t=l();return e.substring(t.length)}function d(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function h(e){return e.finished||e.headersSent}function f(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function p(e,t){let n=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await p(t.Component,t.ctx)}:{};let i=await e.getInitialProps(t);if(n&&h(n))return i;if(!i)throw Object.defineProperty(Error(`"${d(e)}.getInitialProps()" should resolve to an object. But found "${i}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return i}let g="u">typeof performance,m=g&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class C extends Error{}class y extends Error{}class w extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class v extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class b extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function I(e){return JSON.stringify({message:e.message,stack:e.stack})}},573668,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"isLocalURL",{enumerable:!0,get:function(){return a}});let i=e.r(718967),r=e.r(652817);function a(e){if(!(0,i.isAbsoluteUrl)(e))return!0;try{let t=(0,i.getLocationOrigin)(),n=new URL(e,t);return n.origin===t&&(0,r.hasBasePath)(n.pathname)}catch(e){return!1}}},284508,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"errorOnce",{enumerable:!0,get:function(){return i}});let i=e=>{}},522016,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={default:function(){return C},useLinkStatus:function(){return w}};for(var r in i)Object.defineProperty(n,r,{enumerable:!0,get:i[r]});let a=e.r(190809),s=e.r(474076),o=a._(e.r(271645)),c=e.r(195057),l=e.r(8372),u=e.r(818581),d=e.r(718967),h=e.r(405550);e.r(233525);let f=e.r(91949),p=e.r(573668),g=e.r(509396);function m(e){return"string"==typeof e?e:(0,c.formatUrl)(e)}function C(t){var n;let i,r,a,[c,C]=(0,o.useOptimistic)(f.IDLE_LINK_STATUS),w=(0,o.useRef)(null),{href:v,as:b,children:I,prefetch:E=null,passHref:A,replace:S,shallow:P,scroll:N,onClick:U,onMouseEnter:O,onTouchStart:T,legacyBehavior:R=!1,onNavigate:_,ref:k,unstable_dynamicOnHover:M,...q}=t;i=I,R&&("string"==typeof i||"number"==typeof i)&&(i=(0,s.jsx)("a",{children:i}));let D=o.default.useContext(l.AppRouterContext),j=!1!==E,F=!1!==E?null===(n=E)||"auto"===n?g.FetchStrategy.PPR:g.FetchStrategy.Full:g.FetchStrategy.PPR,{href:L,as:x}=o.default.useMemo(()=>{let e=m(v);return{href:e,as:b?m(b):e}},[v,b]);if(R){if(i?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});r=o.default.Children.only(i)}let W=R?r&&"object"==typeof r&&r.ref:k,H=o.default.useCallback(e=>(null!==D&&(w.current=(0,f.mountLinkInstance)(e,L,D,F,j,C)),()=>{w.current&&((0,f.unmountLinkForCurrentNavigation)(w.current),w.current=null),(0,f.unmountPrefetchableInstance)(e)}),[j,L,D,F,C]),Q={ref:(0,u.useMergedRef)(H,W),onClick(t){R||"function"!=typeof U||U(t),R&&r.props&&"function"==typeof r.props.onClick&&r.props.onClick(t),!D||t.defaultPrevented||function(t,n,i,r,a,s,c){if("u">typeof window){let l,{nodeName:u}=t.currentTarget;if("A"===u.toUpperCase()&&((l=t.currentTarget.getAttribute("target"))&&"_self"!==l||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,p.isLocalURL)(n)){a&&(t.preventDefault(),location.replace(n));return}if(t.preventDefault(),c){let e=!1;if(c({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:d}=e.r(699781);o.default.startTransition(()=>{d(i||n,a?"replace":"push",s??!0,r.current)})}}(t,L,x,w,S,N,_)},onMouseEnter(e){R||"function"!=typeof O||O(e),R&&r.props&&"function"==typeof r.props.onMouseEnter&&r.props.onMouseEnter(e),D&&j&&(0,f.onNavigationIntent)(e.currentTarget,!0===M)},onTouchStart:function(e){R||"function"!=typeof T||T(e),R&&r.props&&"function"==typeof r.props.onTouchStart&&r.props.onTouchStart(e),D&&j&&(0,f.onNavigationIntent)(e.currentTarget,!0===M)}};return(0,d.isAbsoluteUrl)(x)?Q.href=x:R&&!A&&("a"!==r.type||"href"in r.props)||(Q.href=(0,h.addBasePath)(x)),a=R?o.default.cloneElement(r,Q):(0,s.jsx)("a",{...q,...Q,children:i}),(0,s.jsx)(y.Provider,{value:c,children:a})}e.r(284508);let y=(0,o.createContext)(f.IDLE_LINK_STATUS),w=()=>(0,o.useContext)(y);("function"==typeof n.default||"object"==typeof n.default&&null!==n.default)&&void 0===n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),t.exports=n.default)},86274,e=>{"use strict";let t;var n=e.i(474076),i=e.i(271645),r=e.i(604647),a=e.i(619273),s=e.i(247167),o=e.i(540143),c=e.i(936553),l=e.i(88587),u=class extends l.Removable{#e;#t;#n;#i;#r;#a;#s;constructor(e){super(),this.#s=!1,this.#a=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#i=e.client,this.#n=this.#i.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=h(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){if(this.options={...this.#a,...e},this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){let e=h(this.options);void 0!==e.data&&(this.setState(d(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#n.remove(this)}setData(e,t){let n=(0,a.replaceData)(this.state.data,e,this.options);return this.#o({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#o({type:"setState",state:e,setStateOptions:t})}cancel(e){let t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(a.noop).catch(a.noop):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>!1!==(0,a.resolveEnabled)(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===a.skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===(0,a.resolveStaleTime)(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!(0,a.timeUntilStale)(this.state.dataUpdatedAt,e))}onFocus(){let e=this.observers.find(e=>e.shouldFetchOnWindowFocus());e?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){let e=this.observers.find(e=>e.shouldFetchOnReconnect());e?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#s?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}async fetch(e,t){let n;if("idle"!==this.state.fetchStatus&&this.#r?.status()!=="rejected"){if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){let e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}let i=new AbortController,r=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#s=!0,i.signal)})},s=()=>{let e,n=(0,a.ensureQueryFn)(this.options,t),i=(r(e={client:this.#i,queryKey:this.queryKey,meta:this.meta}),e);return(this.#s=!1,this.options.persister)?this.options.persister(n,i,this):n(i)},o=(r(n={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:s}),n);this.options.behavior?.onFetch(o,this),this.#t=this.state,("idle"===this.state.fetchStatus||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#o({type:"fetch",meta:o.fetchOptions?.meta}),this.#r=(0,c.createRetryer)({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:e=>{e instanceof c.CancelledError&&e.revert&&this.setState({...this.#t,fetchStatus:"idle"}),i.abort()},onFail:(e,t)=>{this.#o({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{let e=await this.#r.start();if(void 0===e)throw Error(`${this.queryHash} data is undefined`);return this.setData(e),this.#n.config.onSuccess?.(e,this),this.#n.config.onSettled?.(e,this.state.error,this),e}catch(e){if(e instanceof c.CancelledError){if(e.silent)return this.#r.promise;else if(e.revert){if(void 0===this.state.data)throw e;return this.state.data}}throw this.#o({type:"error",error:e}),this.#n.config.onError?.(e,this),this.#n.config.onSettled?.(this.state.data,e,this),e}finally{this.scheduleGc()}}#o(e){let t=t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":var n,i;return{...t,...(n=t.data,i=this.options,{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:(0,c.canFetch)(i.networkMode)?"fetching":"paused",...void 0===n&&{error:null,status:"pending"}}),fetchMeta:e.meta??null};case"success":let r={...t,...d(e.data,e.dataUpdatedAt),dataUpdateCount:t.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?r:void 0,r;case"error":let a=e.error;return{...t,error:a,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}};this.state=t(this.state),o.notifyManager.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function d(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function h(e){let t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==t,i=n?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var f=e.i(915823),p=class extends f.Subscribable{constructor(e={}){super(),this.config=e,this.#c=new Map}#c;build(e,t,n){let i=t.queryKey,r=t.queryHash??(0,a.hashQueryKeyByOptions)(i,t),s=this.get(r);return s||(s=new u({client:e,queryKey:i,queryHash:r,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(s)),s}add(e){this.#c.has(e.queryHash)||(this.#c.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#c.get(e.queryHash);t&&(e.destroy(),t===e&&this.#c.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){o.notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#c.get(e)}getAll(){return[...this.#c.values()]}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,a.matchQuery)(t,e))}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(t=>(0,a.matchQuery)(e,t)):t}notify(e){o.notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){o.notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){o.notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},g=e.i(114272),m=f,C=class extends m.Subscribable{constructor(e={}){super(),this.config=e,this.#l=new Set,this.#u=new Map,this.#d=0}#l;#u;#d;build(e,t,n){let i=new g.Mutation({client:e,mutationCache:this,mutationId:++this.#d,options:e.defaultMutationOptions(t),state:n});return this.add(i),i}add(e){this.#l.add(e);let t=y(e);if("string"==typeof t){let n=this.#u.get(t);n?n.push(e):this.#u.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#l.delete(e)){let t=y(e);if("string"==typeof t){let n=this.#u.get(t);if(n)if(n.length>1){let t=n.indexOf(e);-1!==t&&n.splice(t,1)}else n[0]===e&&this.#u.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){let t=y(e);if("string"!=typeof t)return!0;{let n=this.#u.get(t),i=n?.find(e=>"pending"===e.state.status);return!i||i===e}}runNext(e){let t=y(e);if("string"!=typeof t)return Promise.resolve();{let n=this.#u.get(t)?.find(t=>t!==e&&t.state.isPaused);return n?.continue()??Promise.resolve()}}clear(){o.notifyManager.batch(()=>{this.#l.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#l.clear(),this.#u.clear()})}getAll(){return Array.from(this.#l)}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,a.matchMutation)(t,e))}findAll(e={}){return this.getAll().filter(t=>(0,a.matchMutation)(e,t))}notify(e){o.notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return o.notifyManager.batch(()=>Promise.all(e.map(e=>e.continue().catch(a.noop))))}};function y(e){return e.options.scope?.id}var w=e.i(175555),v=e.i(814448);function b(e){return{onFetch:(t,n)=>{let i=t.options,r=t.fetchOptions?.meta?.fetchMore?.direction,s=t.state.data?.pages||[],o=t.state.data?.pageParams||[],c={pages:[],pageParams:[]},l=0,u=async()=>{let n=!1,u=(0,a.ensureQueryFn)(t.options,t.fetchOptions),d=async(e,i,r)=>{let s;if(n)return Promise.reject();if(null==i&&e.pages.length)return Promise.resolve(e);let o=(s={client:t.client,queryKey:t.queryKey,pageParam:i,direction:r?"backward":"forward",meta:t.options.meta},(0,a.addConsumeAwareSignal)(s,()=>t.signal,()=>n=!0),s),c=await u(o),{maxPages:l}=t.options,d=r?a.addToStart:a.addToEnd;return{pages:d(e.pages,c,l),pageParams:d(e.pageParams,i,l)}};if(r&&s.length){let e="backward"===r,t={pages:s,pageParams:o},n=(e?function(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}:I)(i,t);c=await d(t,n,e)}else{let t=e??s.length;do{let e=0===l?o[0]??i.initialPageParam:I(i,c);if(l>0&&null==e)break;c=await d(c,e),l++}while(l<t)}return c};t.options.persister?t.fetchFn=()=>t.options.persister?.(u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=u}}}function I(e,{pages:t,pageParams:n}){let i=t.length-1;return t.length>0?e.getNextPageParam(t[i],t,n[i],n):void 0}var E=class{#h;#f;#a;#p;#g;#m;#C;#y;constructor(e={}){this.#h=e.queryCache||new p,this.#f=e.mutationCache||new C,this.#a=e.defaultOptions||{},this.#p=new Map,this.#g=new Map,this.#m=0}mount(){this.#m++,1===this.#m&&(this.#C=w.focusManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#h.onFocus())}),this.#y=v.onlineManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#h.onOnline())}))}unmount(){this.#m--,0===this.#m&&(this.#C?.(),this.#C=void 0,this.#y?.(),this.#y=void 0)}isFetching(e){return this.#h.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#f.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#h.get(t.queryHash)?.state.data}ensureQueryData(e){let t=this.defaultQueryOptions(e),n=this.#h.build(this,t),i=n.state.data;return void 0===i?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime((0,a.resolveStaleTime)(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return this.#h.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){let i=this.defaultQueryOptions({queryKey:e}),r=this.#h.get(i.queryHash),s=r?.state.data,o=(0,a.functionalUpdate)(t,s);if(void 0!==o)return this.#h.build(this,i).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return o.notifyManager.batch(()=>this.#h.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#h.get(t.queryHash)?.state}removeQueries(e){let t=this.#h;o.notifyManager.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let n=this.#h;return o.notifyManager.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){let n={revert:!0,...t};return Promise.all(o.notifyManager.batch(()=>this.#h.findAll(e).map(e=>e.cancel(n)))).then(a.noop).catch(a.noop)}invalidateQueries(e,t={}){return o.notifyManager.batch(()=>(this.#h.findAll(e).forEach(e=>{e.invalidate()}),e?.refetchType==="none")?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))}refetchQueries(e,t={}){let n={...t,cancelRefetch:t.cancelRefetch??!0};return Promise.all(o.notifyManager.batch(()=>this.#h.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(a.noop)),"paused"===e.state.fetchStatus?Promise.resolve():t}))).then(a.noop)}fetchQuery(e){let t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);let n=this.#h.build(this,t);return n.isStaleByTime((0,a.resolveStaleTime)(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(a.noop).catch(a.noop)}fetchInfiniteQuery(e){return e.behavior=b(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(a.noop).catch(a.noop)}ensureInfiniteQueryData(e){return e.behavior=b(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return v.onlineManager.isOnline()?this.#f.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#h}getMutationCache(){return this.#f}getDefaultOptions(){return this.#a}setDefaultOptions(e){this.#a=e}setQueryDefaults(e,t){this.#p.set((0,a.hashKey)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...this.#p.values()],n={};return t.forEach(t=>{(0,a.partialMatchKey)(e,t.queryKey)&&Object.assign(n,t.defaultOptions)}),n}setMutationDefaults(e,t){this.#g.set((0,a.hashKey)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...this.#g.values()],n={};return t.forEach(t=>{(0,a.partialMatchKey)(e,t.mutationKey)&&Object.assign(n,t.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;let t={...this.#a.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,a.hashQueryKeyByOptions)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===a.skipToken&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#a.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#h.clear(),this.#f.clear()}},A=e.i(912598),S=e.i(574983);function P(e,t){return JSON.parse(e,(e,n)=>{let i=n;return i?.__type==="bigint"&&(i=BigInt(i.value)),i?.__type==="Map"&&(i=new Map(i.value)),t?.(e,i)??i})}function N(e,t){return e.slice(0,t).join(".")||"."}function U(e,t){let{length:n}=e;for(let i=0;i<n;++i)if(e[i]===t)return i+1;return 0}function O(e,t,n,i){var r;let a,s,o,c;return JSON.stringify(e,(r=(e,n)=>{let i=n;return"bigint"==typeof i&&(i={__type:"bigint",value:n.toString()}),i instanceof Map&&(i={__type:"Map",value:Array.from(n.entries())}),t?.(e,i)??i},a=true,s="function"==typeof i,o=[],c=[],function(e,t){if("object"==typeof t)if(o.length){let n=U(o,this);0===n?o[o.length]=this:(o.splice(n),c.splice(n)),c[c.length]=e;let r=U(o,t);if(0!==r)return s?i.call(this,e,t,N(c,r)):`[ref=${N(c,r)}]`}else o[0]=t,c[0]=e;return a?r.call(this,e,t):t}),n??void 0)}function T(e){let{deserialize:t=P,key:n="wagmi",serialize:i=O,storage:r=R}=e;function a(e){return e instanceof Promise?e.then(e=>e).catch(()=>null):e}return{...r,key:n,async getItem(e,i){let s=r.getItem(`${n}.${e}`),o=await a(s);return o?t(o)??null:i??null},async setItem(e,t){let s=`${n}.${e}`;null===t?await a(r.removeItem(s)):await a(r.setItem(s,i(t)))},async removeItem(e){await a(r.removeItem(`${n}.${e}`))}}}let R={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};var _=e.i(206148);async function k(e,t){let n;if((n="function"==typeof t.connector?e._internal.connectors.setup(t.connector):t.connector).uid===e.state.current)throw new _.ConnectorAlreadyConnectedError;try{e.setState(e=>({...e,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});let{connector:i,...r}=t,a=await n.connect(r);return n.emitter.off("connect",e._internal.events.connect),n.emitter.on("change",e._internal.events.change),n.emitter.on("disconnect",e._internal.events.disconnect),await e.storage?.setItem("recentConnectorId",n.id),e.setState(e=>({...e,connections:new Map(e.connections).set(n.uid,{accounts:r.withCapabilities?a.accounts.map(e=>"object"==typeof e?e.address:e):a.accounts,chainId:a.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:r.withCapabilities?a.accounts.map(e=>"object"==typeof e?e:{address:e,capabilities:{}}):a.accounts,chainId:a.chainId}}catch(t){throw e.setState(e=>({...e,status:e.current?"connected":"disconnected"})),t}}var M=e.i(363625);let q=e=>t=>{try{let n=e(t);if(n instanceof Promise)return n;return{then:e=>q(e)(n),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>q(t)(e)}}},D=e=>{let t,n=new Set,i=(e,i)=>{let r="function"==typeof e?e(t):e;if(!Object.is(r,t)){let e=t;t=(null!=i?i:"object"!=typeof r||null===r)?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,a={setState:i,getState:r,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e))},s=t=e(i,r,a);return a},j=e=>e?D(e):D;var F=e.i(794702);e.i(595932);var L=e.i(87246);class x{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new L.EventEmitter})}on(e,t){this._emitter.on(e,t)}once(e,t){this._emitter.once(e,t)}off(e,t){this._emitter.off(e,t)}emit(e,...t){let n=t[0];this._emitter.emit(e,{uid:this.uid,...n})}listenerCount(e){return this._emitter.listenerCount(e)}}let W=256;var H=e.i(296247),Q=e.i(123555),Q=Q,K=e.i(153077),$=e.i(426254);async function B(e,t){let{address:n,blockNumber:i,blockTag:r,chainId:a}=t,s=e.getClient({chainId:a}),o=(0,$.getAction)(s,K.getBalance,"getBalance"),c=await o(i?{address:n,blockNumber:i}:{address:n,blockTag:r}),l=e.chains.find(e=>e.id===a)??s.chain;return{decimals:l.nativeCurrency.decimals,symbol:l.nativeCurrency.symbol,value:c}}var G=e.i(324307),z=e.i(368941),V=Q;async function J(e,t){let{account:n,chainId:i,...r}=t,a=n??(0,V.getConnection)(e).address,s=e.getClient({chainId:i});return(0,$.getAction)(s,z.prepareTransactionRequest,"prepareTransactionRequest")({...r,...a?{account:a}:{}})}var X=e.i(337917),Y=e.i(599976),Z=e.i(44563);async function ee(e,t){let n,{account:i,connector:r,...a}=t;return n="object"==typeof i&&"local"===i.type?e.getClient():await (0,Z.getConnectorClient)(e,{account:i,connector:r}),(0,$.getAction)(n,Y.signMessage,"signMessage")({...a,...i?{account:i}:{}})}var et=e.i(377349);async function en(e,t){let{addEthereumChainParameter:n,chainId:i}=t,r=e.state.connections.get(t.connector?.uid??e.state.current);if(r){let e=r.connector;if(!e.switchChain)throw new et.SwitchChainNotSupportedError({connector:e});return await e.switchChain({addEthereumChainParameter:n,chainId:i})}let a=e.chains.find(e=>e.id===i);if(!a)throw new _.ChainNotConfiguredError;return e.setState(e=>({...e,chainId:i})),a}var ei=e.i(6110),er=e.i(484734);async function ea(e,t){let n,{chainId:i,connector:r,...a}=t;n=t.account?t.account:(await (0,Z.getConnectorClient)(e,{account:t.account,assertChainId:!1,chainId:i,connector:r})).account;let s=e.getClient({chainId:i});return(0,$.getAction)(s,er.estimateGas,"estimateGas")({...a,account:n})}var es=e.i(117504),eo=e.i(938630);async function ec(e,t){let n,{account:i,chainId:r,connector:a,...s}=t;n="object"==typeof i&&i?.type==="local"?e.getClient({chainId:r}):await (0,Z.getConnectorClient)(e,{account:i??void 0,assertChainId:!1,chainId:r,connector:a});let o=r&&n.chain?.id!==r?{id:r}:n.chain,c=(0,$.getAction)(n,eo.writeContract,"writeContract");return await c({...s,...i?{account:i}:{},assertChainId:!!r,chain:o})}var el=e.i(450323),eu=e.i(989509),ed=e.i(579917),eh=e.i(948789);async function ef(e,t){let{chainId:n,timeout:i=0,...r}=t,a=e.getClient({chainId:n}),s=(0,$.getAction)(a,eh.waitForTransactionReceipt,"waitForTransactionReceipt"),o=await s({...r,timeout:i});if("reverted"===o.status){let e=(0,$.getAction)(a,ed.getTransaction,"getTransaction"),{from:t,...n}=await e({hash:o.transactionHash}),i=(0,$.getAction)(a,eu.call,"call"),r=await i({...n,account:t,data:n.input,gasPrice:"eip1559"!==n.type?n.gasPrice:void 0,maxFeePerGas:"eip1559"===n.type?n.maxFeePerGas:void 0,maxPriorityFeePerGas:"eip1559"===n.type?n.maxPriorityFeePerGas:void 0});throw Error(r?.data?(0,el.hexToString)(`0x${r.data.substring(138)}`):"unknown reason")}return{...o,chainId:a.chain.id}}var ep=e.i(225580),ep=ep,eg=e.i(331587),em=e.i(395024),eC=e.i(383856),ey=e.i(823838),ew=e.i(644616),ev=e.i(668375),eb=e.i(683075),eI=e.i(401564),eE=e.i(681285),eA=e.i(56774),eS=e.i(637824),eP=e.i(241845),eN=e.i(960398),eU=e.i(227302),eO=e.i(82283),eT=e.i(758331),eR=e.i(757758),e_=e.i(334523),ek=e.i(769718),eM=e.i(689862),eq=e.i(851887),eD=e.i(149454),ej=e.i(218454),eF=e.i(564126),eL=e.i(535568),ex=e.i(292227);e.i(971342);var eW=e.i(675107),eH=e.i(354157);function eQ(e){let t,n,i,r,a,s,o,c=e.isNewChainsStale??!0;return(0,eM.createConnector)(l=>({id:"walletConnect",name:"WalletConnect",type:eQ.type,provider:e.universalProvider,async setup(){let e=await this.getProvider().catch(()=>null);e&&(r||(r=this.onConnect.bind(this),e.on("connect",r)),s||(s=this.onSessionDelete.bind(this),e.on("session_delete",s)))},async connect({...e}={}){try{let t=eN.ChainController.getCaipNetworks(),c=await this.getProvider();if(!c)throw new et.ProviderNotFoundError;a||(a=this.onDisplayUri,c.on("display_uri",a));let l=await this.isChainsStale();c.session&&l&&await c.disconnect();let u=eO.OptionsController.state.universalProviderConfigOverride;if(!c.session||l){let n=eH.WcHelpersUtil.createNamespaces(t,u);await c.connect({optionalNamespaces:n,..."pairingTopic"in e?{pairingTopic:e.pairingTopic}:{}}),this.setRequestedChainsIds(t.map(e=>Number(e.id)))}let d=await this.getAccounts(),h=await this.getChainId(),f=c.session?.namespaces?.eip155?.chains,p=f?.some(e=>Number(e.split(":")[1])===h),g=1;p?g=h:f?.[0]&&(g=Number(f[0].split(":")[1])),a&&(c.removeListener("display_uri",a),a=void 0),r&&(c.removeListener("connect",r),r=void 0),n||(n=this.onAccountsChanged.bind(this),c.on("accountsChanged",n)),i||(i=this.onChainChanged.bind(this),c.on("chainChanged",i)),o||(o=this.onDisconnect.bind(this),c.on("disconnect",o)),s||(s=this.onSessionDelete.bind(this),c.on("session_delete",s));let m=u?.defaultChain;return c.setDefaultChain(m??`eip155:${g}`),{accounts:d,chainId:g}}catch(e){if(/(user rejected|connection request reset)/i.test(e?.message))throw new eC.UserRejectedRequestError(e);throw e}},async disconnect(){let e=await this.getProvider();try{await e?.disconnect()}catch(e){if(!/No matching key/i.test(e.message))throw e}finally{i&&(e?.removeListener("chainChanged",i),i=void 0),o&&(e?.removeListener("disconnect",o),o=void 0),r||(r=this.onConnect.bind(this),e?.on("connect",r)),n&&(e?.removeListener("accountsChanged",n),n=void 0),s&&(e?.removeListener("session_delete",s),s=void 0),this.setRequestedChainsIds([])}},async getAccounts(){let e=await this.getProvider();if(!e?.session?.namespaces)return[];let t=e?.session?.namespaces[eI.ConstantsUtil.CHAIN.EVM]?.accounts,n=t?.map(e=>e.split(":")[2])??[],i=new Set;return n.filter(e=>{let t=e?.toLowerCase();return!i.has(t)&&(i.add(t),!0)})},async getProvider({chainId:n}={}){t||(t=e.universalProvider,t?.events.setMaxListeners(1/0));let i=eT.StorageUtil.getActiveNamespace(),r=eN.ChainController.getActiveCaipNetwork()?.id;if(n&&r!==n&&i){let e=eT.StorageUtil.getStoredActiveCaipNetworkId(),t=i?eN.ChainController.getCaipNetworks(i):[],n=t?.find(t=>t.id===e);n&&n.chainNamespace===eI.ConstantsUtil.CHAIN.EVM&&await this.switchChain?.({chainId:Number(n.id)})}return t},async getChainId(){let e=eN.ChainController.getActiveCaipNetwork(eI.ConstantsUtil.CHAIN.EVM)?.id;if(e)return e;let t=await this.getProvider(),n=t.session?.namespaces[eI.ConstantsUtil.CHAIN.EVM]?.chains?.[0],i=eN.ChainController.getCaipNetworks().find(e=>e.id===n);return i?.id},async isAuthorized(){try{let[e,t]=await Promise.all([this.getAccounts(),this.getProvider()]);if(!e.length)return!1;if(await this.isChainsStale()&&t.session)return await t.disconnect().catch(()=>{}),!1;return!0}catch{return!1}},async switchChain({addEthereumChainParameter:e,chainId:t}){let n=await this.getProvider();if(!n)throw new et.ProviderNotFoundError;let i=eN.ChainController.getCaipNetworks().find(e=>e.id===t);if(!i)throw new eC.SwitchChainError(new _.ChainNotConfiguredError);try{await n.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,eW.numberToHex)(t)}]}),i?.caipNetworkId&&n.setDefaultChain(i?.caipNetworkId),l.emitter.emit("change",{chainId:Number(t)});let e=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...e,t]),{...i,id:i.id}}catch(r){if(/(?:user rejected)/iu.test(r.message))throw new eC.UserRejectedRequestError(r);try{let r;r=e?.blockExplorerUrls?e.blockExplorerUrls:i.blockExplorers?.default.url?[i.blockExplorers?.default.url]:[];let a=i.rpcUrls?.chainDefault?.http||[],s={blockExplorerUrls:r,chainId:(0,eW.numberToHex)(t),chainName:i.name,iconUrls:e?.iconUrls,nativeCurrency:i.nativeCurrency,rpcUrls:a};await n.request({method:"wallet_addEthereumChain",params:[s]});let o=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...o,t]),{...i,id:i.id}}catch(e){throw new eC.UserRejectedRequestError(e)}}},onAccountsChanged(e){0===e.length?this.onDisconnect():l.emitter.emit("change",{accounts:e.map(e=>(0,ey.getAddress)(e))})},onChainChanged(e){let t=Number(e);l.emitter.emit("change",{chainId:t})},onConnect(e){this.setRequestedChainsIds(eN.ChainController.getCaipNetworks().map(e=>Number(e.id)))},async onDisconnect(e){this.setRequestedChainsIds([]),l.emitter.emit("disconnect");let t=await this.getProvider();n&&(t.removeListener("accountsChanged",n),n=void 0),i&&(t.removeListener("chainChanged",i),i=void 0),o&&(t.removeListener("disconnect",o),o=void 0),s&&(t.removeListener("session_delete",s),s=void 0),r||(r=this.onConnect.bind(this),t.on("connect",r))},onDisplayUri(e){l.emitter.emit("message",{type:"display_uri",data:e})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){if(!t?.session?.namespaces)return[];let e=t?.session?.namespaces[eI.ConstantsUtil.CHAIN.EVM]?.accounts;return e?.map(e=>Number.parseInt(e.split(":")[1]??""))??[]},async getRequestedChainsIds(){return[...new Set(await l.storage?.getItem(this.requestedChainsStorageKey)??[])]},async isChainsStale(){if(!c)return!1;let e=l.chains.map(e=>e.id),t=this.getNamespaceChainsIds();if(t.length&&!t.some(t=>e.includes(t)))return!1;let n=await this.getRequestedChainsIds();return!e.every(e=>n.includes(Number(e)))},async setRequestedChainsIds(e){await l.storage?.setItem(this.requestedChainsStorageKey,e)},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}}))}eQ.type="walletConnect";var eK=e.i(365801),e$=e.i(742710);let eB=(0,eK.proxy)({pendingTransactions:0}),eG={state:eB,subscribeKey:(e,t)=>(0,e$.subscribeKey)(eB,e,t),increase(e){eB[e]+=1},decrease(e){eB[e]-=1},reset(e){eB[e]=0}};async function ez(t){if(eU.CoreHelperUtil.isSafeApp()){let{safe:n}=await e.A(149428);if(n&&!t.some(e=>"safe"===e.type))return n()}return null}async function eV(t){try{let{baseAccount:n}=await e.A(149428);if(n&&!t.some(e=>"baseAccount"===e.id))return n()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}let eJ={enable:!1,pollingInterval:3e4};class eX extends eS.AdapterBlueprint{constructor(e){const t=e_.CaipNetworksUtil.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=eI.ConstantsUtil.CHAIN.EVM,this.adapterType=eI.ConstantsUtil.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...eJ,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:t}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){let t=this.getWagmiConnector(e.id);if(!t)return{accounts:[]};if(t.id===eI.ConstantsUtil.CONNECTOR_ID.AUTH){let e=await t.getProvider();if(!e?.user)return{accounts:[]};let{address:n,accounts:i}=e.user;return Promise.resolve({accounts:(i||[{address:n,type:"eoa"}]).map(e=>eU.CoreHelperUtil.createAccount("eip155",e.address,e.type))})}let{addresses:n,address:i}=(0,Q.getConnection)(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(n||[i])].map(e=>eU.CoreHelperUtil.createAccount("eip155",e||"","eoa"))})}checkChainId(){let{chainId:e}=(0,Q.getConnection)(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(t=>t.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(e=>e.chainNamespace===eI.ConstantsUtil.CHAIN.EVM);let n={},i=[...e.connectors??[]];this.wagmiChains.forEach(t=>{let i=e.transports?.[t.id],r=e_.CaipNetworksUtil.getCaipNetworkId(t);i?n[t.id]=e_.CaipNetworksUtil.extendWagmiTransports(t,e.projectId,i):n[t.id]=e_.CaipNetworksUtil.getViemTransport(t,e.projectId,e.customRpcUrls?.[r])}),this.wagmiConfig=function(e){let n,i,r,a,s,o,c,l,{multiInjectedProviderDiscovery:u=!0,storage:d=T({storage:(i="u">typeof window&&window.localStorage?window.localStorage:R,{getItem:e=>i.getItem(e),removeItem(e){i.removeItem(e)},setItem(e,t){try{i.setItem(e,t)}catch{}}})}),syncConnectedChain:h=!0,ssr:f=!1,...p}=e,g="u">typeof window&&u?(r=new Set,a=[],o=(s=()=>(function(e){if("u"<typeof window)return;let t=t=>e(t.detail);return window.addEventListener("eip6963:announceProvider",t),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",t)})(e=>{a.some(({info:t})=>t.uuid===e.info.uuid)||(a=[...a,e],r.forEach(t=>t(a,{added:[e]})))}))(),{_listeners:()=>r,clear(){r.forEach(e=>e([],{removed:[...a]})),a=[]},destroy(){this.clear(),r.clear(),o?.()},findProvider:({rdns:e})=>a.find(t=>t.info.rdns===e),getProviders:()=>a,reset(){this.clear(),o?.(),o=s()},subscribe:(e,{emitImmediately:t}={})=>(r.add(e),t&&e(a,{added:a}),()=>r.delete(e))}):void 0,m=j(()=>p.chains),C=j(()=>{let e=[],t=new Set;for(let n of p.connectors??[]){let i=y(n);if(e.push(i),!f&&i.rdns)for(let e of"string"==typeof i.rdns?[i.rdns]:i.rdns)t.add(e)}if(!f&&g)for(let n of g.getProviders())t.has(n.info.rdns)||e.push(y(w(n)));return e});function y(e){let n=new x(function(e=11){if(!t||W+e>512){t="",W=0;for(let e=0;e<256;e++)t+=(256+256*Math.random()|0).toString(16).substring(1)}return t.substring(W,W+++e)}()),i={...e({emitter:n,chains:m.getState(),storage:d,transports:p.transports}),emitter:n,uid:n.uid};return n.on("connect",P),i.setup?.(),i}function w(e){let{info:t}=e,n=e.provider;return(0,F.injected)({target:{...t,id:t.rdns,provider:n}})}let v=new Map;function b(){return{chainId:m.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let I="0.0.0-canary-";n=H.version.startsWith(I)?Number.parseInt(H.version.replace(I,""),10):Number.parseInt(H.version.split(".")[0]??"0",10);let E=j((l=d?(c={migrate(e,t){if(t===n)return e;let i=b(),r=A(e,i.chainId);return{...i,chainId:r}},name:"store",partialize:e=>({connections:{__type:"Map",value:Array.from(e.connections.entries()).map(([e,t])=>{let{id:n,name:i,type:r,uid:a}=t.connector;return[e,{...t,connector:{id:n,name:i,type:r,uid:a}}]})},chainId:e.chainId,current:e.current}),merge(e,t){"object"==typeof e&&e&&"status"in e&&delete e.status;let n=A(e,t.chainId);return{...t,...e,chainId:n}},skipHydration:f,storage:d,version:n},(e,t,n)=>{let i,r={storage:function(e,t){let n;try{n=e()}catch(e){return}return{getItem:e=>{var t;let i=e=>null===e?null:JSON.parse(e,void 0),r=null!=(t=n.getItem(e))?t:null;return r instanceof Promise?r.then(i):i(r)},setItem:(e,t)=>n.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>n.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...c},a=!1,s=new Set,o=new Set,l=r.storage;if(!l)return b((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),e(...t)},t,n);let u=()=>{let e=r.partialize({...t()});return l.setItem(r.name,{state:e,version:r.version})},d=n.setState;n.setState=(e,t)=>{d(e,t),u()};let h=b((...t)=>{e(...t),u()},t,n);n.getInitialState=()=>h;let f=()=>{var n,c;if(!l)return;a=!1,s.forEach(e=>{var n;return e(null!=(n=t())?n:h)});let d=(null==(c=r.onRehydrateStorage)?void 0:c.call(r,null!=(n=t())?n:h))||void 0;return q(l.getItem.bind(l))(r.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===r.version)return[!1,e.state];else{if(r.migrate)return[!0,r.migrate(e.state,e.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(n=>{var a;let[s,o]=n;if(e(i=r.merge(o,null!=(a=t())?a:h),!0),s)return u()}).then(()=>{null==d||d(i,void 0),i=t(),a=!0,o.forEach(e=>e(i))}).catch(e=>{null==d||d(void 0,e)})};return n.persist={setOptions:e=>{r={...r,...e},e.storage&&(l=e.storage)},clearStorage:()=>{null==l||l.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>f(),hasHydrated:()=>a,onHydrate:e=>(s.add(e),()=>{s.delete(e)}),onFinishHydration:e=>(o.add(e),()=>{o.delete(e)})},r.skipHydration||f(),i||h}):b,(e,t,n)=>{let i=n.subscribe;return n.subscribe=(e,t,r)=>{let a=e;if(t){let i=(null==r?void 0:r.equalityFn)||Object.is,s=e(n.getState());a=n=>{let r=e(n);if(!i(s,r)){let e=s;t(s=r,e)}},(null==r?void 0:r.fireImmediately)&&t(s,s)}return i(a)},l(e,t,n)}));function A(e,t){return e&&"object"==typeof e&&"chainId"in e&&"number"==typeof e.chainId&&m.getState().some(t=>t.id===e.chainId)?e.chainId:t}function S(e){E.setState(t=>{let n=t.connections.get(e.uid);return n?{...t,connections:new Map(t.connections).set(e.uid,{accounts:e.accounts??n.accounts,chainId:e.chainId??n.chainId,connector:n.connector})}:t})}function P(e){"connecting"!==E.getState().status&&"reconnecting"!==E.getState().status&&E.setState(t=>{let n=C.getState().find(t=>t.uid===e.uid);return n?(n.emitter.listenerCount("connect")&&n.emitter.off("connect",S),n.emitter.listenerCount("change")||n.emitter.on("change",S),n.emitter.listenerCount("disconnect")||n.emitter.on("disconnect",N),{...t,connections:new Map(t.connections).set(e.uid,{accounts:e.accounts,chainId:e.chainId,connector:n}),current:e.uid,status:"connected"}):t})}function N(e){E.setState(t=>{let n=t.connections.get(e.uid);if(n){let e=n.connector;e.emitter.listenerCount("change")&&n.connector.emitter.off("change",S),e.emitter.listenerCount("disconnect")&&n.connector.emitter.off("disconnect",N),e.emitter.listenerCount("connect")||n.connector.emitter.on("connect",P)}if(t.connections.delete(e.uid),0===t.connections.size)return{...t,connections:new Map,current:null,status:"disconnected"};let i=t.connections.values().next().value;return{...t,connections:new Map(t.connections),current:i.connector.uid}})}return E.setState(b()),h&&E.subscribe(({connections:e,current:t})=>t?e.get(t)?.chainId:void 0,e=>{if(m.getState().some(t=>t.id===e))return E.setState(t=>({...t,chainId:e??t.chainId}))}),g?.subscribe(e=>{let t=new Set,n=new Set;for(let e of C.getState())if(t.add(e.id),e.rdns)for(let t of"string"==typeof e.rdns?[e.rdns]:e.rdns)n.add(t);let i=[];for(let r of e){if(n.has(r.info.rdns))continue;let e=y(w(r));t.has(e.id)||i.push(e)}(!d||E.persist.hasHydrated())&&C.setState(e=>[...e,...i],!0)}),{get chains(){return m.getState()},get connectors(){return C.getState()},storage:d,getClient:function(e={}){let t,n=e.chainId??E.getState().chainId,i=m.getState().find(e=>e.id===n);if(e.chainId&&!i)throw new _.ChainNotConfiguredError;{let e=v.get(E.getState().chainId);if(e&&!i)return e;if(!i)throw new _.ChainNotConfiguredError}{let e=v.get(n);if(e)return e}if(p.client)t=p.client({chain:i});else{let e=i.id,n=m.getState().map(e=>e.id),r={};for(let[t,i]of Object.entries(p))if("chains"!==t&&"client"!==t&&"connectors"!==t&&"transports"!==t)if("object"==typeof i)if(e in i)r[t]=i[e];else{if(n.some(e=>e in i))continue;r[t]=i}else r[t]=i;t=(0,M.createClient)({...r,chain:i,batch:r.batch??{multicall:!0},transport:t=>p.transports[e]({...t,connectors:C})})}return v.set(n,t),t},get state(){return E.getState()},setState(e){let t;t="function"==typeof e?e(E.getState()):e;let n=b();"object"!=typeof t&&(t=n),Object.keys(n).some(e=>!(e in t))&&(t=n),E.setState(t,!0)},subscribe:(e,t,n)=>E.subscribe(e,t,n?{...n,fireImmediately:n.emitImmediately}:void 0),_internal:{mipd:g,async revalidate(){let e=E.getState(),t=e.connections,n=e.current;for(let[,e]of t){let i=e.connector;i.isAuthorized&&await i.isAuthorized()||(t.delete(i.uid),n===i.uid&&(n=null))}E.setState(e=>({...e,connections:t,current:n}))},store:E,ssr:!!f,syncConnectedChain:h,transports:p.transports,chains:{setState(e){let t="function"==typeof e?e(m.getState()):e;if(0!==t.length)return m.setState(t,!0)},subscribe:e=>m.subscribe(e)},connectors:{providerDetailToConnector:w,setup:y,setState:e=>C.setState("function"==typeof e?e(C.getState()):e,!0),subscribe:e=>C.subscribe(e)},events:{change:S,connect:P,disconnect:N}}}}({...e,chains:this.wagmiChains,connectors:i,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=function(e,t){let n,i,{syncConnectedChain:r=e._internal.syncConnectedChain,...a}=t,s=t=>{n&&n();let i=e.getClient({chainId:t});return n=(0,$.getAction)(i,em.watchPendingTransactions,"watchPendingTransactions")(a)},o=s(t.chainId);return r&&!t.chainId&&(i=e.subscribe(({chainId:e})=>e,async e=>s(e))),()=>{o?.(),i?.()}}(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),eG.increase("pendingTransactions")}});let e=eG.subscribeKey("pendingTransactions",t=>{t>=eI.ConstantsUtil.LIMITS.PENDING_TRANSACTIONS&&(this.unwatchPendingTransactions?.(),e())})}setupWatchers(){(0,eg.watchConnections)(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(e=>{let t=this.getCaipNetworks().find(t=>t.id===e.chainId),n=e.connector.id===eI.ConstantsUtil.CONNECTOR_ID.AUTH;return{accounts:e.accounts.map(e=>({address:this.toChecksummedAddress(e)})),caipNetwork:t,connectorId:e.connector.id,auth:n?{name:eT.StorageUtil.getConnectedSocialProvider(),username:eT.StorageUtil.getConnectedSocialUsername()}:void 0}}))}}),(0,ep.watchConnection)(this.wagmiConfig,{onChange:(e,t)=>{if("disconnected"===e.status&&t.address&&this.emit("disconnect"),e?.chainId&&e?.chainId!==t?.chainId&&this.emit("switchNetwork",{chainId:e.chainId}),"connected"===e.status){let n=e.address!==t?.address,i=e.connector.id!==t.connector?.id,r="connected"!==t.status;(n||i||r)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}})}async addThirdPartyConnectors(){let e=[],{enableCoinbase:t}=eO.OptionsController.state||{};if(!1!==t){let t=await eV(this.wagmiConfig.connectors);t&&e.push(t)}let n=await ez(this.wagmiConfig.connectors);n&&e.push(n),await Promise.all(e.map(e=>{let t=this.configureInternalConnector(e);return this.addWagmiConnector(t)}))}addWagmiConnectors(){let e=[];!1!==eO.OptionsController.state.enableInjected&&e.push((0,F.injected)({shimDisconnect:!0}));let{features:t,remoteFeatures:n,projectId:i,enableAuthLogger:r}=eO.OptionsController.state,a=n?.email??t?.email??!0,s=n?.socials??t?.socials,o=Array.isArray(s)&&s?.length>0;(a||o)&&e.push(function(e){let t,n,i=[];function r(e){let t=eN.ChainController.getCaipNetworks(eI.ConstantsUtil.CHAIN.EVM),n=Number(eE.NetworkUtil.parseEvmChainId(e));if(!t.some(t=>String(t.id)===String(e))){let e=eN.ChainController.getActiveCaipNetwork(eI.ConstantsUtil.CHAIN.EVM)?.id||t[0]?.id;e&&Number.isInteger(Number(e))&&(n=Number(e))}if(!n)throw Error("ChainId not found in networks");return n}async function a(n={}){let s=(t||(t=ex.W3mFrameProviderSingleton.getInstance({projectId:e.options.projectId,chainId:(0,eF.getActiveCaipNetwork)()?.caipNetworkId,enableLogger:e.options.enableAuthLogger,onTimeout:e=>{"iframe_load_failed"===e?eq.AlertController.open(eL.ErrorUtil.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):"iframe_request_timeout"===e?eq.AlertController.open(eL.ErrorUtil.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):"unverified_domain"===e&&eq.AlertController.open(eL.ErrorUtil.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:eL.ErrorUtil.EmbeddedWalletAbortController,getActiveCaipNetwork:e=>(0,eF.getActiveCaipNetwork)(e),getCaipNetworks:e=>eN.ChainController.getCaipNetworks(e)})),t),o=n.chainId;if(n.isReconnecting){let t=eE.NetworkUtil.parseEvmChainId(s.getLastUsedChainId()||""),n=e.chains?.[0].id;if(!(o=t||n))throw Error("ChainId not found in provider")}let c=(0,eF.getPreferredAccountType)("eip155"),{address:l,chainId:u,accounts:d}=await ej.SIWXUtil.authConnectorAuthenticate({authConnector:s,chainId:o,preferredAccountType:c,socialUri:n.socialUri,chainNamespace:eI.ConstantsUtil.CHAIN.EVM});i=d?.map(e=>e.address)||[l];let h=r(u);return{accounts:i,account:l,chainId:h,chain:{id:h,unsupported:!1}}}return(0,eM.createConnector)(t=>({id:eI.ConstantsUtil.CONNECTOR_ID.AUTH,name:eI.ConstantsUtil.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:eI.ConstantsUtil.CHAIN.EVM,async connect(e={}){if(n){let t=await n;return{accounts:e.withCapabilities?t.accounts.map(e=>({address:e,capabilities:{}})):t.accounts,chainId:t.chainId}}n||(n=new Promise(t=>{t(a(e))}));let t=await n;return n=void 0,{accounts:e.withCapabilities?t.accounts.map(e=>({address:e,capabilities:{}})):t.accounts,chainId:t.chainId}},async disconnect(){let e=await this.getProvider();await e.disconnect()},getAccounts:()=>i?.length?(t.emitter.emit("change",{accounts:i}),Promise.resolve(i)):Promise.resolve([]),async getProvider(){return this.provider||(this.provider=ex.W3mFrameProviderSingleton.getInstance({projectId:e.options.projectId,chainId:(0,eF.getActiveCaipNetwork)()?.caipNetworkId,enableLogger:e.options.enableAuthLogger,abortController:eL.ErrorUtil.EmbeddedWalletAbortController,onTimeout:e=>{"iframe_load_failed"===e?eq.AlertController.open(eL.ErrorUtil.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):"iframe_request_timeout"===e?eq.AlertController.open(eL.ErrorUtil.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):"unverified_domain"===e&&eq.AlertController.open(eL.ErrorUtil.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:e=>(0,eF.getActiveCaipNetwork)(e),getCaipNetworks:e=>eN.ChainController.getCaipNetworks(e)})),Promise.resolve(this.provider)},async getChainId(){let e=await this.getProvider(),{chainId:t}=await e.getChainId();return r(t)},async isAuthorized(){let e=eN.ChainController.state.activeChain===eI.ConstantsUtil.CHAIN.EVM;return(!eI.ConstantsUtil.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(e=>eD.ConnectorController.getConnectorId(e)===eI.ConstantsUtil.CONNECTOR_ID.AUTH)||!!e)&&Promise.resolve((await this.getProvider()).getLoginEmailUsed())},async switchChain({chainId:e}){try{let n=t.chains.find(t=>t.id===e);if(!n)throw new eC.SwitchChainError(Error("chain not found on connector."));let r=await this.getProvider(),a=(0,eF.getPreferredAccountType)("eip155"),s=await r.connect({chainId:e,preferredAccountType:a});return i=s?.accounts?.map(e=>e.address)||[s.address],t.emitter.emit("change",{chainId:Number(e),accounts:i}),n}catch(e){if(e instanceof Error)throw new eC.SwitchChainError(e);throw e}},onAccountsChanged(e){0===e.length?this.onDisconnect():t.emitter.emit("change",{accounts:e.map(ey.getAddress)})},onChainChanged(e){let n=Number(e);t.emitter.emit("change",{chainId:n})},async onDisconnect(e){let t=await this.getProvider();await t.disconnect()}}))}({chains:this.wagmiChains,options:{projectId:i,enableAuthLogger:r}})),e.forEach(e=>{this.configureInternalConnector(e)})}configureInternalConnector(e){let t=this.wagmiConfig._internal.connectors.setup(e);return this.wagmiConfig._internal.connectors.setState(e=>[...e,t]),t}async handleAccountChanged({address:e,chainId:t,connector:n}){if(!this.namespace)throw Error("WagmiAdapter:handleAccountChanged - namespace is required");let i=await n.getProvider().catch(()=>void 0);this.emit("accountChanged",{address:this.toChecksummedAddress(e),chainId:t,connector:{id:n.id,name:eA.PresetsUtil.ConnectorNamesMap[n.id]??n.name,imageId:eA.PresetsUtil.ConnectorImageIds[n.id],type:eA.PresetsUtil.ConnectorTypesMap[n.type]??"EXTERNAL",info:n.id===eI.ConstantsUtil.CONNECTOR_ID.INJECTED?void 0:{rdns:n.id},provider:i,chain:this.namespace,chains:[]}})}async writeSolanaTransaction(){return Promise.resolve({hash:""})}async signMessage(e){try{return{signature:await ee(this.wagmiConfig,{message:e.message,account:e.address})}}catch(e){throw Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){let{chainId:t,address:n}=(0,Q.getConnection)(this.wagmiConfig),i=this.wagmiChains?.find(e=>e.id===t),r={account:n,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chain:i,type:"legacy",parameters:["nonce"]};await J(this.wagmiConfig,r);let a=await (0,es.sendTransaction)(this.wagmiConfig,r);return await ef(this.wagmiConfig,{hash:a,timeout:25e3}),{hash:a}}async writeContract(e){let{caipNetwork:t,...n}=e,i=Number(eE.NetworkUtil.caipNetworkIdToNumber(t.caipNetworkId)),r=this.wagmiChains?.find(e=>e.id===i);return{hash:await ec(this.wagmiConfig,{chain:r,address:n.tokenAddress,account:n.fromAddress,abi:n.abi,functionName:n.method,args:n.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await ea(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch(e){throw Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return(0,ev.parseUnits)(e.value,e.decimals)}formatUnits(e){return(0,ew.formatUnits)(e.value,e.decimals)}async addWagmiConnector(e){let t;if(!this.namespace)throw Error("WagmiAdapter:addWagmiConnector - namespace is required");let{enableEIP6963:n}=eO.OptionsController.state||{};if(e.type===eI.ConstantsUtil.CONNECTOR_ID.INJECTED&&!1===n||e.id===eI.ConstantsUtil.CONNECTOR_ID.AUTH||e.id===eI.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT)return;e.id!==eI.ConstantsUtil.CONNECTOR_ID.BASE_ACCOUNT&&(t=await e.getProvider().catch(()=>void 0));let i=eP.AssetController.state.connectorImages;this.addConnector({id:e.id,explorerId:eA.PresetsUtil.ConnectorExplorerIds[e.id]??eA.PresetsUtil.ConnectorExplorerIds[e.name],imageUrl:i?.[e.id]??e.icon,name:eA.PresetsUtil.ConnectorNamesMap[e.id]??e.name,imageId:eA.PresetsUtil.ConnectorImageIds[e.id],type:eA.PresetsUtil.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===eI.ConstantsUtil.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:t,chain:this.namespace,chains:[]})}async syncConnectors(){!function(e,t){let{onChange:n}=t;e._internal.connectors.subscribe((e,t)=>{n(Object.values(e),t)})}(this.wagmiConfig,{onChange:e=>{e.forEach(e=>this.addWagmiConnector(e))}}),this.addWagmiConnectors(),await Promise.all(this.wagmiConfig.connectors.map(e=>this.addWagmiConnector(e))),await this.addThirdPartyConnectors()}async syncConnections(){let e=this.connectors.filter(e=>{let{hasDisconnected:t,hasConnected:n}=ek.HelpersUtil.getConnectorStorageInfo(e.id,this.namespace);return!t&&n}).map(e=>this.getWagmiConnector(e.id)).filter(Boolean);await (0,X.reconnect)(this.wagmiConfig,{connectors:e})}async syncConnection(e){let{id:t,chainId:n}=e,i=(0,G.getConnections)(this.wagmiConfig).find(e=>e.connector.id===t),r=this.getWagmiConnector(t),a=await r?.getProvider();if(eU.CoreHelperUtil.isSafeApp()&&t===eI.ConstantsUtil.CONNECTOR_ID.SAFE&&!i?.accounts.length){let e=this.getWagmiConnector("safe");if(e){let t=await k(this.wagmiConfig,{connector:e,chainId:Number(n)}),r=await e.getProvider();return{chainId:Number(n),address:this.toChecksummedAddress(t.accounts[0]),provider:r,type:i?.connector.type?.toUpperCase(),id:i?.connector.id}}}return{chainId:Number(i?.chainId),address:this.toChecksummedAddress(i?.accounts[0]),provider:a,type:i?.connector.type?.toUpperCase(),id:i?.connector.id}}async connectWalletConnect(e){try{let t=this.getWalletConnectConnector();await t.authenticate();let n=this.getWagmiConnector("walletConnect");if(!n)throw Error("UniversalAdapter:connectWalletConnect - connector not found");let i=await k(this.wagmiConfig,{connector:n,chainId:e?Number(e):void 0});return i.chainId!==Number(e)&&await en(this.wagmiConfig,{chainId:i.chainId}),{clientId:await t.provider.client.core.crypto.getClientId()}}catch(e){if(e instanceof eC.UserRejectedRequestError||eb.ErrorUtil.isUserRejectedRequestError(e))throw new eb.UserRejectedRequestError(e);throw e}}async connect(e){try{let{id:t,address:n,provider:i,type:r,info:a,chainId:s,socialUri:o}=e,c=this.getWagmiConnector(t);if(!c)throw Error("connectionControllerClient:connectExternal - connector is undefined");i&&a&&c.id===eI.ConstantsUtil.CONNECTOR_ID.EIP6963&&c.setEip6963Wallet?.({provider:i,info:a});let l=this.wagmiConfig.state?.connections?.get(c.uid);if(l){await this.wagmiConfig.storage?.setItem("recentConnectorId",c.id);let e=[...l.accounts].sort((e,t)=>ek.HelpersUtil.isLowerCaseMatch(e,n)?-1:+!!ek.HelpersUtil.isLowerCaseMatch(t,n));return this.wagmiConfig?.setState(t=>({...t,connections:new Map(t.connections).set(c.uid,{accounts:e,chainId:l.chainId,connector:l.connector}),current:c.uid,status:"connected"})),{address:this.toChecksummedAddress(e[0]),chainId:l.chainId,provider:i,type:r,id:t}}let u=await k(this.wagmiConfig,{connector:c,chainId:s?Number(s):void 0,socialUri:o}),d=i??await c.getProvider();return{address:this.toChecksummedAddress(u.accounts[0]),chainId:u.chainId,provider:d,type:r,id:t}}catch(e){if(e instanceof eC.UserRejectedRequestError||eb.ErrorUtil.isUserRejectedRequestError(e))throw new eb.UserRejectedRequestError(e);throw e}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(e=>({address:this.toChecksummedAddress(e)})),connectorId:e.connector.id}))}async reconnect(e){let{id:t}=e,n=this.getWagmiConnector(t);if(!n)throw Error("connectionControllerClient:connectExternal - connector is undefined");await (0,X.reconnect)(this.wagmiConfig,{connectors:[n]})}async getBalance(e){let t=e.address,n=this.getCaipNetworks().find(t=>t.id===e.chainId);if(!t)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(n&&this.wagmiConfig){let t=`${n.caipNetworkId}:${e.address}`,i=this.balancePromises[t];if(i)return i;let r=eT.StorageUtil.getNativeBalanceCacheForCaipAddress(t);return r?{balance:r.balance,symbol:r.symbol}:(this.balancePromises[t]=new Promise(async i=>{try{let r=Number(e.chainId),a=await B(this.wagmiConfig,{address:e.address,chainId:r,token:e.tokens?.[n.caipNetworkId]?.address});eT.StorageUtil.updateNativeBalanceCache({caipAddress:t,balance:a.formatted,symbol:a.symbol,timestamp:Date.now()}),i({balance:a.formatted,symbol:a.symbol})}catch(e){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",e),i({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[t]}),this.balancePromises[t]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){return this.getWagmiConnector("walletConnect")?.provider}async disconnect(e){if(e.id){let t=this.getWagmiConnector(e.id),n=(0,G.getConnections)(this.wagmiConfig).find(t=>ek.HelpersUtil.isLowerCaseMatch(t.connector.id,e.id));return(await (0,ei.disconnect)(this.wagmiConfig,{connector:t}),!1===eO.OptionsController.state.enableReconnect&&this.deleteConnection(e.id),n)?{connections:[{accounts:n.accounts.map(e=>({address:this.toChecksummedAddress(e)})),connectorId:n.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){let e=(0,G.getConnections)(this.wagmiConfig),t=await Promise.allSettled(e.map(async e=>{let t=this.getWagmiConnector(e.connector.id);return t&&await (0,ei.disconnect)(this.wagmiConfig,{connector:t}),e}));return this.wagmiConfig.state.connections.clear(),{connections:t.filter(e=>"fulfilled"===e.status).map(({value:e})=>({accounts:e.accounts.map(e=>({address:this.toChecksummedAddress(e)})),connectorId:e.connector.id}))}}async switchNetwork(e){let{caipNetwork:t}=e,n=this.wagmiConfig.chains.find(e=>e.id.toString()===t.id.toString());if(!n)throw Error("connectionControllerClient:switchNetwork - wagmiChain is undefined");let{name:i,nativeCurrency:r,rpcUrls:a,blockExplorers:s,id:o}=n,c=t.rpcUrls?.chainDefault?.http?.[0]??a.default.http[0]??"",l=s?.default.url??t.blockExplorers?.default?.url??"",u=r??t.nativeCurrency,d=i??t.name;await en(this.wagmiConfig,{chainId:o,addEthereumChainParameter:{chainName:d,nativeCurrency:u,rpcUrls:[c],blockExplorerUrls:[l]}}),await super.switchNetwork(e)}async getCapabilities(e){if(!this.wagmiConfig)throw Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");let t=(0,G.getConnections)(this.wagmiConfig)[0],n=t?this.getWagmiConnector(t.connector.id):null;if(!n)throw Error("connectionControllerClient:getCapabilities - connector is undefined");let i=await n.getProvider();if(!i)throw Error("connectionControllerClient:getCapabilities - provider is undefined");return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");let t=(0,G.getConnections)(this.wagmiConfig)[0],n=t?this.getWagmiConnector(t.connector.id):null;if(!n)throw Error("connectionControllerClient:grantPermissions - connector is undefined");let i=await n.getProvider();if(!i)throw Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");let t=(0,G.getConnections)(this.wagmiConfig)[0],n=t?this.getWagmiConnector(t.connector.id):null;if(!n)throw Error("connectionControllerClient:revokePermissions - connector is undefined");let i=await n.getProvider();if(!i)throw Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");let t=(0,G.getConnections)(this.wagmiConfig)[0],n=t?this.getWagmiConnector(t.connector.id):null;if(!n)throw Error("connectionControllerClient:walletGetAssets - connector is undefined");let i=await n.getProvider();if(!i)throw Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:eI.ConstantsUtil.CONNECTOR_ID.AUTH,type:"AUTH",name:eI.ConstantsUtil.CONNECTOR_NAMES.AUTH,provider:e,imageId:eA.PresetsUtil.ConnectorImageIds[eI.ConstantsUtil.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){e.on("connect",()=>{let e=(0,G.getConnections)(this.wagmiConfig),t=this.getWagmiConnector("walletConnect");if(t&&!e.find(e=>e.connector.id===t.id)){if("eip155"===eN.ChainController.state.activeChain)return;(0,X.reconnect)(this.wagmiConfig,{connectors:[t]})}});let t=eQ({universalProvider:e});return this.configureInternalConnector(t),this.addConnector(new eR.WalletConnectConnector({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}toChecksummedAddress(e){return(0,ey.checksumAddress)(e.toLowerCase())}}let eY=s.default.env.NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID||"demo-project-id",eZ={id:42,name:"LUKSO",nativeCurrency:{name:"LUKSO",symbol:"LYX",decimals:18},rpcUrls:{default:{http:["https://rpc.mainnet.lukso.network"]}},blockExplorers:{default:{name:"LUKSO Explorer",url:"https://explorer.execution.mainnet.lukso.network"}}},e0=[eZ,{id:4201,name:"LUKSO Testnet",nativeCurrency:{name:"LUKSO Testnet",symbol:"LYXt",decimals:18},rpcUrls:{default:{http:["https://rpc.testnet.lukso.network"]}},blockExplorers:{default:{name:"LUKSO Testnet Explorer",url:"https://explorer.execution.testnet.lukso.network"}}}],e1=new eX({storage:T({storage:window.localStorage}),ssr:!1,projectId:eY,networks:e0});e1.wagmiConfig;var e5=e.i(63350);let e8=new E,e9=!1,e6={name:"UP Migration",description:"Migrate your Universal Profile between apps and wallets",url:window.location.origin,icons:["https://universalprofile.cloud/images/up-logo.png"]};function e3({children:e}){let[t,a]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{if(!e9)try{(0,r.createAppKit)({adapters:[e1],projectId:eY,networks:e0,defaultNetwork:eZ,metadata:e6,features:{analytics:!1,email:!1,socials:!1},themeMode:"light",themeVariables:{"--w3m-accent":"#FE005B","--w3m-border-radius-master":"8px"},featuredWalletIds:["bc949c5d968ae81310268bf9193f9c9fb514ad4ca1f5b35a81fb36d68a8a1e2e"],includeWalletIds:["bc949c5d968ae81310268bf9193f9c9fb514ad4ca1f5b35a81fb36d68a8a1e2e","c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96"]}),e9=!0}catch(e){console.error("Failed to initialize AppKit:",e)}a(!0)},[]),t)?(0,n.jsx)(S.WagmiProvider,{config:e1.wagmiConfig,children:(0,n.jsx)(A.QueryClientProvider,{client:e8,children:(0,n.jsx)(e5.WalletContextProvider,{children:e})})}):null}e.s(["WalletProvider",()=>e3],86274)}]);